import java.util.Queue;
import java.util.LinkedList;

//atributos
class Ascensor{
    private int pisoActual;
    private String direccion; // "subiendo", "bajando", "detenido"
    private Puerta puerta;
    private Queue<Integer> destinos;
    private Modulonotificaciones notificaciones;


   // Constructor La rutina de encendido del Ascensor

    public Ascensor(Modulonotificaciones notificaciones) {
        this.notificaciones = notificaciones;
        pisoActual = 1;
        direccion = "detenido";
        puerta = new Puerta();
        destinos = new LinkedList<>();
    }
    // Método: agregarDestino Cuando alguien presiona un botón

    public void agregarDestino(int piso) {
        destinos.add(piso);
        System.out.println(" Destino agregado: pisoactual " + pisoActual + " -> piso " + piso);
    }
   // Método: mover La lógica central de movimiento
    public void mover() {
        while (!destinos.isEmpty()) {
            int destino = destinos.poll();
            direccion = (destino > pisoActual) ? "subiendo" : "bajando";
            System.out.println(" Ascensor " + direccion + " hacia el piso " + destino);
            pisoActual = destino;
            detenerAscensor();
        }
    }
       
       // Método: detenerAscensor La rutina de llegada al piso
    public void detenerAscensor() {
        direccion = "detenido";
        System.out.println(" Llegó al piso " + pisoActual);
        puerta.abrir();
        puerta.cerrar(notificaciones);
    }
       // metodo en caso de falla
    public void activarModoEmergencia() {
        System.out.println(" Emergencia detectada: deteniendo ascensor.");
        puerta.abrir();
        notificaciones.registrarFalla("El ascensor se detuvo por emergencia.");
    }
}
